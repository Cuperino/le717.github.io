---
title: Blog
layout: blogpost
---

{% include scripts.html %}

<script>
  console.log("Loading blog feed from http://Triangle717.WordPress.com");

  $.getJSON("//public-api.wordpress.com/rest/v1/sites/triangle717.wordpress.com/posts/?number=1&callback=?", function(data) {
    "use strict";
    /* Based on example from http://jsfiddle.net/hLWdH/334/ */

    var postContent, postContainer;

//    console.log("Number of blog posts downloaded: " + data.posts.length);

      data.posts.forEach(function(postDetails) {
        var postAuthor = postDetails.name,
            postDate = postDetails.date,
            postID = postDetails.slug,
            postTitle = postDetails.title,
            postURL = postDetails.URL;
        postContent = postDetails.content;
        postContainer = "#" + postID;

        //console.log("Raw WP code: " + postContent);

        //postContent = postContent.replace(/style=".+"/g, "");
        //postContent = postContent.replace(/class='.+'/g, "");
        //$(postContainer).remove(".wp-smiley");

        // Remove any WordPress alignment classes
        $(postContainer).find("div").each(function() {
          $(this).removeClass("alignnone");
          $(this).removeClass("alignleft");
          $(this).removeClass("aligncenter");
          $(this).removeClass("alignright");
        });

        $(postContent).find("img").each(function() {
          $(this).removeClass();
          //$(this).stripClass("size-");
          $(this).addClass("img-shadow");
        });

        console.log("WP code removed:\n" + postContent);

        // Display post details
        $(".post-title").html(postTitle);
        $(".post-date").html(postDate);
        $(".post-author").html(postAuthor);

        // Display post content
        $("body").append('<div id="' + postID + '"></div>');
        $(postContainer).html(postContent);
      });

//    // Remove any WordPress alignment classes
//    $(postContainer).find("div").each(function() {
////      $(this).removeClass("alignnone");
////      $(this).removeClass("alignleft");
////      $(this).removeClass("aligncenter");
////      $(this).removeClass("alignright");
//      $(this).stripClass("align");
//    });
  }, "json");



//    $('#title')
//      .html(data.posts[i].title);
//      .attr('href', data.posts[i].URL);
//    });
</script>
